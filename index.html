<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Get Annie Chan</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="card" id="main-card">
    <h1 class="site-title pink-title">Welcome to</h1>
    <img src="annie_thumb.jpg" alt="Annie Icon" class="annie-icon" />
    <h2 class="site-subtitle">GetAnnieChan.org</h2>
    <a href="annie_chan.png" download>
      <button class="button">Get Annie Chan</button>
    </a>
    <div class="button-row">
      <button class="button" onclick="showCredits()">Credits & Fair Use</button>
      <a href="/extras" class="button">Extras</a>
    </div>
    <p class="version">v3.0 beta 4</p>
  </div>

  <div class="card hidden" id="credits-card">
    <h2>Credits & Fair Use</h2>
    <p><strong>Credits:</strong> Artwork by CT Chrysler</p>
    <p><strong>Fair Use Disclaimer:</strong> This is a non-commercial tribute. All rights belong to their respective owners.</p>
    <button class="button" onclick="showMain()">Back</button>
  </div>

  <script>
    function showCredits() {
      document.getElementById('main-card').classList.add('hidden');
      document.getElementById('credits-card').classList.remove('hidden');
    }
    function showMain() {
      document.getElementById('credits-card').classList.add('hidden');
      document.getElementById('main-card').classList.remove('hidden');
    }

    function showPopup(title, message) {
      const popup = document.createElement('div');
      popup.style.position = 'fixed';
      popup.style.top = '20%';
      popup.style.left = '50%';
      popup.style.transform = 'translateX(-50%)';
      popup.style.backgroundColor = '#ffe5ec';
      popup.style.border = '2px solid #ff69b4';
      popup.style.padding = '1.5rem';
      popup.style.borderRadius = '15px';
      popup.style.boxShadow = '0 0 20px rgba(0,0,0,0.2)';
      popup.style.maxWidth = '90%';
      popup.style.textAlign = 'center';
      popup.style.zIndex = '9999';
      popup.style.color = '#ff2e84';
      popup.innerHTML = '<h2>' + title + '</h2><p>' + message + '</p><button onclick="this.parentElement.remove()">Close</button>';
      document.body.appendChild(popup);
    }

    const today = new Date();
    const isDec23 = today.getMonth() === 11 && today.getDate() === 23;
    const isJune30 = today.getMonth() === 5 && today.getDate() === 30;
    const currentYear = today.getFullYear();

    const getButton = document.querySelector("a[href='annie_chan.png'] .button");
    if (isDec23 && getButton) {
      getButton.classList.add('gold');
      getButton.addEventListener("click", function(e) {
        e.preventDefault();
        showPopup("ðŸŽ‰ " + (currentYear - 2015) + " Years of Annie Chan", "December 23, 2015 â€“ Thank you CT.");
        setTimeout(() => {
          const link = document.createElement("a");
          link.href = "annie_chan.png";
          link.download = "annie_chan.png";
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }, 1000);
      });
    }

    if (isJune30) {
      showPopup("ðŸŽ‰ " + (currentYear - 2011) + " Years of Annie", "June 30, 2011 â€“ Thank you CT.");
    }

    const icon = document.querySelector(".annie-icon");
    if (icon) {
      icon.addEventListener("click", () => location.reload());
    }
  </script>
</body>
</html>