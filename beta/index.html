<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Get Annie Chan</title>
  <link rel="icon" href="favicon.png" />
  <link rel="apple-touch-icon" href="apple-touch-icon.png" />
  <link rel="stylesheet" href="style.css" />
</head>
<body oncontextmenu="return false;">
  <div class="card">
    <h1 class="site-title" id="title">
      <span class="chunk">Welcome</span>
      <span class="chunk">to</span>
      <span class="chunk">Get</span>
      <span class="chunk" id="annieName">Annie</span>
      <span class="chunk">Chan</span>
      <img src="annie_thumb.jpg" alt="Annie Icon" class="annie-icon" id="annieIcon" draggable="false" oncontextmenu="return false" />
    </h1>

    <div class="primary-actions">
      <a id="downloadLink" href="annie_chan.png">
        <button class="button" id="getAnnieBtn">Get Annie Chan</button>
      </a>

      <a href="/extras" class="extras-link">Extras</a>

      <button class="button" id="creditsBtn">Credits & Fair Use</button>
    </div>
  </div>

  <!-- Credits Modal -->
  <div class="overlay" id="overlay" aria-hidden="true">
    <div class="credits-modal" role="dialog" aria-modal="true">
      <button class="close-x" id="closeX" aria-label="Close">✕</button>
      <h2>Credits & Fair Use</h2>
      <p>(Website by GAC) – Published by GAC / For Entertainment Purposes Only</p>
      <p>Maintained & Updated by GAC Web Division</p>
      <p>Version 2.3.2 – 2025 Edition – Produced at GAC Web Division</p>
      <p>"This artwork speaks to me, and the rest of the world should see it. Support the artist."</p>
      <p>“Get Annie Chan” is a tribute project. GAC does not claim ownership of any artwork used. All rights belong to their respective creators.</p>
      <p class="artist-line">
        <strong>Featuring artwork from ctchrysler</strong>
        <a href="https://www.deviantart.com/dctb/art/Annie-Chan-579680748" target="_blank" class="annie-link">“Annie Chan”</a> — Annie Mei cosplaying as 
        <a href="https://twitter.com/shunyayamashita" target="_blank" class="annie-link" style="text-decoration: underline;">Shunya Yamashita’s</a> Sera-chan.<br>
        <em>It’s been a while since I’ve drawn her in a sailor outfit!</em>
      </p>
      <p><strong>Fair Use Disclaimer:</strong> This site falls under fair use as a non-commercial, transformative tribute. If the original creator wishes for its removal, it will be taken down immediately.</p>
      <p>© 2025 GAC</p>
      <p>Peace and <span class="love-text">Love</span></p>
      <button class="done-button" id="doneBtn">Done</button>
    </div>
  </div>

  <!-- Popups -->
  <div class="popup" id="popupJune30">
    <h2 id="juneTitle">🎉 Years of Annie</h2>
    <p>June 30, 2011 – Thank you CT.</p>
    <button onclick="document.getElementById('popupJune30').classList.remove('show')">Close</button>
  </div>

  <div class="popup" id="popupDec22">
    <h2 id="decTitle">🎉 Years of Annie Chan</h2>
    <p>December 22, 2015 – Thank you CT.</p>
    <button onclick="document.getElementById('popupDec22').classList.remove('show')">Close</button>
  </div>

  <script>
    // Credits modal logic
    const overlay = document.getElementById('overlay');
    const creditsBtn = document.getElementById('creditsBtn');
    const closeX = document.getElementById('closeX');
    const doneBtn = document.getElementById('doneBtn');

    function openCredits(){ overlay.classList.add('show'); document.body.classList.add('no-scroll'); overlay.setAttribute('aria-hidden','false'); }
    function closeCredits(){ overlay.classList.remove('show'); document.body.classList.remove('no-scroll'); overlay.setAttribute('aria-hidden','true'); }

    creditsBtn.addEventListener('click', (e)=>{ e.stopPropagation(); openCredits(); });
    closeX.addEventListener('click', closeCredits);
    doneBtn.addEventListener('click', closeCredits);
    overlay.addEventListener('click', (e)=>{ if(e.target === overlay) closeCredits(); });

    // Dynamic titles
    const year = new Date().getFullYear();
    document.getElementById('juneTitle').textContent = `🎉 ${year - 2011} Years of Annie`;
    document.getElementById('decTitle').textContent  = `🎉 ${year - 2015} Years of Annie Chan`;

    // Date checks
    const today = new Date();
    const isJune30   = today.getMonth() === 5 && today.getDate() === 30;
    const isDecAnniv = today.getMonth() === 11 && (today.getDate() === 22 || today.getDate() === 23);

    if (isJune30)   document.getElementById('popupJune30').classList.add('show');
    if (isDecAnniv) document.getElementById('popupDec22').classList.add('show');

    // Gold button (V2 + shine) for Dec 22–23
    const getBtn = document.getElementById('getAnnieBtn');
    const dlLink = document.getElementById('downloadLink');

    if (isDecAnniv) {
      getBtn.classList.add('gold');
      getBtn.addEventListener('click', (e) => {
        e.preventDefault();
        document.getElementById('popupDec22').classList.add('show');
        setTimeout(() => {
          const a = document.createElement('a');
          a.href = dlLink.getAttribute('href');
          a.download = 'annie_chan.png';
          document.body.appendChild(a); a.click(); a.remove();
        }, 900);
      });
    } else {
      // iOS-friendly download handling for normal days
      dlLink.addEventListener('click', (e) => {
        const m = navigator.userAgent.match(/OS (\\d+)_/);
        const ios = m ? parseInt(m[1]) : null;
        if (!ios || ios >= 11) {
          e.preventDefault();
          const a = document.createElement('a');
          a.href = dlLink.getAttribute('href');
          a.download = 'annie_chan.png';
          document.body.appendChild(a); a.click(); a.remove();
        }
      });
    }

    // Easter eggs (kept)
    let nameTaps = 0;
    const requiredTaps = year - 2011;
    document.getElementById('annieName').addEventListener('click', () => {
      nameTaps++;
      if (nameTaps === requiredTaps) {
        document.getElementById('popupJune30').classList.add('show');
        nameTaps = 0;
      }
    });

    let iconTaps = 0, refreshTimer;
    const icon = document.getElementById('annieIcon');
    icon.addEventListener('click', () => {
      iconTaps++;
      clearTimeout(refreshTimer);
      if (iconTaps === 10) {
        document.getElementById('popupDec22').classList.add('show');
        iconTaps = 0;
      } else {
        refreshTimer = setTimeout(() => {
          if (iconTaps === 1) location.reload();
          iconTaps = 0;
        }, 1100);
      }
    });
  </script>
</body>
</html>