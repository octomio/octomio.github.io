<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Get Annie Chan</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="card" id="main-card">
    <h1 class="site-title pink-title">Welcome to <span id="annieName" style="cursor: pointer;">Annie</span> Chan
      <img src="annie_thumb.jpg" alt="Annie Icon" class="annie-icon" id="annieIcon" />
    </h1>
    <a href="annie_chan.png" id="downloadLink">
      <button class="button" id="downloadButton">Get Annie Chan</button>
    </a>
    <div class="button-row">
      <button class="button" onclick="showCredits()">Credits & Fair Use</button>
      <a href="/extras" class="button">Extras</a>
    </div>
    <p class="version">v3.0 beta 4</p>
  </div>

  <div class="card hidden" id="credits-card">
    <h2>Credits & Fair Use</h2>
    <p><strong>Credits:</strong> Artwork by CT Chrysler</p>
    <p><strong>Fair Use Disclaimer:</strong> This is a non-commercial tribute. All rights belong to their respective owners.</p>
    <button class="button" onclick="showMain()">Back</button>
  </div>

  <script>
    function showCredits() {
      document.getElementById('main-card').classList.add('hidden');
      document.getElementById('credits-card').classList.remove('hidden');
    }

    function showMain() {
      document.getElementById('credits-card').classList.add('hidden');
      document.getElementById('main-card').classList.remove('hidden');
    }

    function showPopup(title, message) {
      const popup = document.createElement('div');
      popup.style.position = 'fixed';
      popup.style.top = '20%';
      popup.style.left = '50%';
      popup.style.transform = 'translateX(-50%)';
      popup.style.backgroundColor = '#ffe5ec';
      popup.style.border = '2px solid #ff69b4';
      popup.style.padding = '1.5rem';
      popup.style.borderRadius = '15px';
      popup.style.boxShadow = '0 0 20px rgba(0,0,0,0.2)';
      popup.style.maxWidth = '90%';
      popup.style.textAlign = 'center';
      popup.style.zIndex = '9999';
      popup.style.color = '#ff2e84';
      popup.innerHTML = '<h2>' + title + '</h2><p>' + message + '</p><button onclick="this.parentElement.remove()">Close</button>';
      document.body.appendChild(popup);
    }

    const today = new Date();
    const currentYear = today.getFullYear();
    const isJune30 = today.getMonth() === 5 && today.getDate() === 30;
    const isDec23 = today.getMonth() === 11 && today.getDate() === 23;

    // June 30 auto popup
    if (isJune30) {
      showPopup("ðŸŽ‰ " + (currentYear - 2011) + " Years of Annie", "June 30, 2011 â€“ Thank you CT.");
    }

    // Dec 23 gold button popup
    const downloadButton = document.getElementById("downloadButton");
    const downloadLink = document.getElementById("downloadLink");
    if (isDec23) {
      downloadButton.classList.add("gold");
      downloadButton.addEventListener("click", function(e) {
        e.preventDefault();
        showPopup("ðŸŽ‰ " + (currentYear - 2015) + " Years of Annie Chan", "December 23, 2015 â€“ Thank you CT.");
        setTimeout(() => {
          const link = document.createElement("a");
          link.href = "annie_chan.png";
          link.download = "annie_chan.png";
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
        }, 1000);
      });
    }

    // Annie name taps = original Annie popup
    let nameTaps = 0;
    const annieName = document.getElementById("annieName");
    const requiredTaps = currentYear - 2011;
    annieName.addEventListener("click", () => {
      nameTaps++;
      if (nameTaps === requiredTaps) {
        showPopup("ðŸŽ‰ " + requiredTaps + " Years of Annie", "June 30, 2011 â€“ Thank you CT.");
        nameTaps = 0;
      }
    });

    // Annie icon 1-tap refresh + 10-tap Annie Chan popup
    let iconTaps = 0;
    const annieIcon = document.getElementById("annieIcon");
    annieIcon.addEventListener("click", () => {
      iconTaps++;
      if (iconTaps === 1) {
        setTimeout(() => { iconTaps = 0; }, 800);
        location.reload();
      }
      if (iconTaps === 10) {
        showPopup("ðŸŽ‰ " + (currentYear - 2015) + " Years of Annie Chan", "December 23, 2015 â€“ Thank you CT.");
        iconTaps = 0;
      }
    });
  </script>
</body>
</html>